<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:p="http://primefaces.org/ui" 
      xmlns:f="http://xmlns.jcp.org/jsf/core" 
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:pe="http://primefaces.org/ui/extensions">

    <body>
        <ui:composition template="./../../Template/plantilla.xhtml">
            <ui:define name="content">
                <p:growl id="messages"  showDetail="true" />
                <c:if test="#{autorizationBean.hasAccess('producciondoc') == true}">
                   <f:event type="preRenderView" listener="#{tipoDocumentoBean.listar()}" /> 
                   
                    <div class="col-md-10 col-md-offset-1 col-xs-12">
                        <div class="x_panel">
                            <div class="x_title">
                                <h2>Producción de documentos</h2>
                                <div class="clearfix"></div>
                            </div>
                            <div class="x_content">
                                <br />
                                <h:form>
                                    <div class="form-group col-xs-12">
                                        <div class="col-xs-12">
                                            <p:outputLabel value="Tipo de documento" for="tipoDocumento" class="control-label col-md-4"/>
                                            <div class="col-md-8">
                                                <p:selectOneMenu required="true" id="tipoDocumento" value="#{produccionDoccumentalBean.selectedItem}">
                                                    <f:selectItem noSelectionOption="true" itemLabel="Seleccione el tipo de documento" itemValue="#{null}"/>
                                                    <f:selectItem itemLabel="Acta" itemValue="1"/>
                                                    <f:selectItem itemLabel="Carta" itemValue="2"/>
                                                    <f:selectItem itemLabel="Certificado" itemValue="3"/>
                                                    <f:selectItem itemLabel="Circular" itemValue="4"/>
                                                    <f:selectItem itemLabel="Comunicación Interna" itemValue="5"/>
                                                    <f:selectItem itemLabel="Constancia" itemValue="6"/>
                                                    <f:selectItem itemLabel="Informe" itemValue="7"/>
                                                    <f:ajax render="@form"></f:ajax>
                                                </p:selectOneMenu>
                                               
                                            </div>
                                        </div>
                                        <div class="col-xs-12">
                                             <h:panelGroup rendered="#{produccionDoccumentalBean.selectedItem == 1}" >
                                                    <ui:include src="../produccion/acta.xhtml"></ui:include>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{produccionDoccumentalBean.selectedItem == 2}" >
                                                     <ui:include src="../produccion/carta.xhtml"></ui:include>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{produccionDoccumentalBean.selectedItem == 3}" >
                                                     <ui:include src="../produccion/certificado.xhtml"></ui:include>
                                                </h:panelGroup>
                                                 <h:panelGroup rendered="#{produccionDoccumentalBean.selectedItem == 4}" >
                                                     <ui:include src="../produccion/circular.xhtml"></ui:include>
                                                </h:panelGroup>
                                                 <h:panelGroup rendered="#{produccionDoccumentalBean.selectedItem == 5}" >
                                                     <ui:include src="../produccion/comunicacion.xhtml"></ui:include>
                                                </h:panelGroup>
                                                 <h:panelGroup rendered="#{produccionDoccumentalBean.selectedItem == 6}" >
                                                     <ui:include src="../produccion/constancia.xhtml"></ui:include>
                                                </h:panelGroup>
                                                 <h:panelGroup rendered="#{produccionDoccumentalBean.selectedItem == 7}" >
                                                     <ui:include src="../produccion/informe.xhtml"></ui:include>
                                                </h:panelGroup>
                                        </div>
                                    </div>
                                </h:form>
                            </div>
                        </div>
                    </div>
                   <p:dialog id="dlgVisorCarta" header="Visor de Cartas" widgetVar="denVisorCarta" modal="true" showEffect="fade" hideEffect="fade" resizable="false" dynamic="true" width="80%" maximizable="true" >
                        <h:form>
                            <pe:documentViewer id="documentCtlCarta" height="800" value="#{cartaViewBean.content}" />  
                            <div>
                                <p:commandButton icon="fa fa-fw fa-times" value="Cerrar" immediate="true" oncomplete="PF('denVisorCarta').hide()"></p:commandButton>
                            </div>
                        </h:form>
                    </p:dialog>
                </c:if>
                <c:if test="#{autorizationBean.hasAccess('producciondoc') == false}">
                    <h3>¡Lo sentimos, no tiene acceso a este módulo!</h3>
                </c:if>
            </ui:define>
        </ui:composition>
    </body>

</html>
