<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:p="http://primefaces.org/ui" 
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:o="http://omnifaces.org/ui"
      xmlns:of="http://omnifaces.org/functions">
    <body>
        <ui:composition template="./../../Template/plantilla.xhtml">
            <ui:define name="content">
                <p:growl id="messages"  showDetail="true" />
                <c:if test="#{autorizationBean.hasAccess('paneldocumentos') == true}">
                    <f:event type="preRenderView" listener="#{documentosBean.listarCompartidos(null)}"></f:event>
                    <f:event type="preRenderView" listener="#{documentosBean.listarDocumentosEnviados()}"></f:event>
                    <f:event type="preRenderView" listener="#{documentosBean.listarDocumentosPorVencer()}"></f:event>
                    <f:event type="preRenderView" listener="#{documentosBean.listarDocumentosPrestados()}"></f:event>
                    <f:event type="preRenderView" listener="#{documentosBean.listarDocumentosRecibidos()}"></f:event>
                    <f:event type="preRenderView" listener="#{documentosBean.listarDocumentosSinArchivar()}"></f:event>
                    <f:event type="preRenderView" listener="#{documentosBean.listarActasPorFirmar()}"></f:event>
                    <f:event type="preRenderView" listener="#{documentosBean.listarCartasPorFirmar()}"></f:event>
                    <f:event type="preRenderView" listener="#{documentosBean.listarCertificadosPorFirmar()}"></f:event>
                    <f:event type="preRenderView" listener="#{documentosBean.listarCircularesPorFirmar()}"></f:event>
                    <f:event type="preRenderView" listener="#{documentosBean.listarComunicadosPorFirmar()}"></f:event>
                    <f:event type="preRenderView" listener="#{documentosBean.listarConstanciaPorFirmar()}"></f:event>
                    <f:event type="preRenderView" listener="#{documentosBean.listarInformesPorFirmar()}"></f:event>
                    <div class="col-md-12 col-xs-12">
                        <div class="col-xs-12 x_panel">
                            <div class="x_title">
                                <h2>Gestión de documentos</h2>
                                <div class="clear"></div>
                            </div>
                            <div class='x_content'> 
                                <ul class="nav nav-tabs">
                                    <li class="active"><a data-toggle="tab" href="#menuTab0">Entrantes</a></li>
                                    <c:if test="#{autorizationBean.canCreate('recepcion')== false}">
                                    <li><a data-toggle="tab" href="#menuTab1" style="display: none;">Por Enviar</a></li>
                                    <li><a data-toggle="tab" href="#menuTab2" style="display: none;">Enviados</a></li>
                                    </c:if>
                                    <c:if test="#{autorizationBean.canCreate('recepcion')== true}">
                                    <li><a data-toggle="tab" href="#menuTab1">Por Enviar</a></li>
                                    <li><a data-toggle="tab" href="#menuTab2">Enviados</a></li>
                                    </c:if>
                                    <li><a data-toggle="tab" href="#menuTab3">En Prestamo</a></li>
                                    <li><a data-toggle="tab" href="#menuTab4">Por Vencer</a></li>
                                    <li><a data-toggle="tab" href="#menuTab5">Por Firmar</a></li>
                                    <li><a data-toggle="tab" href="#menuTab6">Por Archivar</a></li>
                                    <li><a data-toggle="tab" href="#menuTab7">Compartidos</a></li>
                                    <!--<button data-toggle="collapse" data-target="#Collapse" class="btn btn-success pull-right"><span class="glyphicon glyphicon-filter" aria-hidden="true"></span></button>-->
                                </ul>
                                <div class="tab-content">
                                    <div id="menuTab0" class="col-xs-12 tab-pane fade in active">
                                        <p:dataTable widgetVar="entrantes" id="lstDocsEntrantes" var="docsEntrantes" value="#{documentosBean.recibidos}" style="margin-bottom:0" rows="50"
                                                     paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     rowsPerPageTemplate="5,10,15,30,50" emptyMessage="¡No se encontraron documentos entrantes!">
                                            <f:facet name="header">
                                                <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                <p:columnToggler datasource="lstDocsEntrantes" trigger="toggler" />
                                            </f:facet>
                                            <p:column headerText="Radicado">
                                                <h:outputText value="#{docsEntrantes.consecutivo}" />
                                            </p:column>
                                            <p:column headerText="Fecha de recepción">
                                                <h:outputText value="#{docsEntrantes.fechaCreacion}" >
                                                    <f:convertDateTime type="date" locale="es"/>
                                                </h:outputText>
                                            </p:column>
                                            <p:column headerText="Tipo Documento">
                                                <h:outputText value="#{docsEntrantes.tipoDocumento.nombre}" />
                                            </p:column>
                                            <p:column headerText="Asunto">
                                                <h:outputText value="#{docsEntrantes.asunto}" />
                                            </p:column>
                                            <p:column headerText="Remitente">
                                                <h:outputText value="#{docsEntrantes.remitente}" />
                                            </p:column>
                                            <p:column headerText="Destinarario">
                                                <h:outputText value="#{docsEntrantes.destinatario.nombres} #{docsEntrantes.destinatario.apelidos}" />
                                            </p:column>
                                            <p:column headerText="Detalle">
                                                <h:outputText value="#{docsEntrantes.detalle}" />

                                            </p:column>
                                            <p:column headerText="Acciones" width="150">
                                                <p:commandLink type="button" title="Responder" action="#{cartaBean.loadDocumento(docsEntrantes)}" disabled="#{not docsEntrantes.tipoDocumento.requiereRespuesta}" update=":dlgResponder"><span class="glyphicon fa fa-fw fa-reply" aria-hidden="true"/></p:commandLink>
                                                <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(docsEntrantes)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                <p:commandLink type="button" title="Prestamo" action="#{prestamoBean.loadDocumento(docsEntrantes)}" update=":dlgPrestamo"><span class="glyphicon fa fa-fw fa-share-alt" aria-hidden="true"/></p:commandLink>
                                                <p:commandLink type="button" title="Compartir con" action="#{compartirBean.loadDocumento(docsEntrantes)}" ><span class="glyphicon fa fa-fw fa-users" aria-hidden="true"/></p:commandLink>                                               
                                                <p:commandLink type="button" title="Redireccionar" action="#{redireccionarBean.loadDocumento(docsEntrantes)}" update=":dlgDevolver"  ><span class="glyphicon fa fa-fw fa-random" aria-hidden="true"/></p:commandLink>
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                    <div id="menuTab1" class="tab-pane fade">
                                        <div class="col-xs-12"> 
                                            <p:dataTable widgetVar="PorEnviar" id="lstDocsPorEnviar" var="docsPorEnviar" value="#{documentosBean.enviados}" style="margin-bottom:0" rows="15"
                                                         paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         rowsPerPageTemplate="5,10,15" emptyMessage="¡No se encontraron documentos por enviar!">
                                                <f:facet name="header">
                                                    <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                    <p:columnToggler datasource="lstDocsPorEnviar" trigger="toggler" />
                                                </f:facet>
                                                <p:column headerText="Radicado">
                                                    <h:outputText value="#{docsPorEnviar.consecutivo}" />
                                                </p:column>
                                                <p:column headerText="Fecha del Documento">
                                                    <h:outputText value="#{docsPorEnviar.fechaCreacion}" >
                                                        <f:convertDateTime type="date" pattern="dd-MM-yyyy"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Asunto">
                                                    <h:outputText value="#{docsPorEnviar.asunto}" />
                                                </p:column>
                                                <p:column headerText="Remitente">
                                                    <h:outputText value="#{docsPorEnviar.remitente}" />
                                                </p:column>
                                                <p:column headerText="Destinarario">
                                                    <h:outputText value="#{docsPorEnviar.destinatario.nombres} #{docsPorEnviar.destinatario.apelidos}" />
                                                </p:column>
                                                <p:column headerText="Detalle">
                                                    <h:outputText value="#{docsPorEnviar.detalle}" />
                                                </p:column>
                                                <p:column headerText="Acciones">
                                                    <p:commandLink type="button" title="Archivar" action="#{archivarBean.loadDocumento(docsEnviados)}" update=":dlgArchivar"><span class="glyphicon fa fa-fw fa-folder" aria-hidden="true"/></p:commandLink>
                                                    <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(docsEnviados)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>
                                    <div id="menuTab2" class="tab-pane fade">
                                        <div class="col-xs-12"> 
                                            <p:dataTable widgetVar="Enviados" id="lstDocsEnviados" var="docsEnviados" value="#{documentosBean.enviados}" style="margin-bottom:0" rows="10"
                                                         paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         rowsPerPageTemplate="5,10,15" emptyMessage="¡No se encontraron documentos enviados!">
                                                <f:facet name="header">
                                                    <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                    <p:columnToggler datasource="lstDocsEnviados" trigger="toggler" />
                                                </f:facet>
                                                <p:column headerText="Radicado">
                                                    <h:outputText value="#{docsEnviados.consecutivo}" />
                                                </p:column>
                                                <p:column headerText="Fecha de recepción">
                                                    <h:outputText value="#{docsEnviados.fechaCreacion}" >
                                                        <f:convertDateTime type="date" locale="es"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Asunto">
                                                    <h:outputText value="#{docsEnviados.asunto}" />
                                                </p:column>
                                                <p:column headerText="Remitente">
                                                    <h:outputText value="#{docsEnviados.remitente}" />
                                                </p:column>
                                                <p:column headerText="Destinarario">
                                                    <h:outputText value="#{docsEnviados.destinatario.nombres} #{docsEnviados.destinatario.apelidos}" />
                                                </p:column>
                                                <p:column headerText="Detalle">
                                                    <h:outputText value="#{docsEnviados.detalle}" />
                                                </p:column>
                                                <p:column headerText="Acciones">
                                                    <p:commandLink type="button" title="Archivar" action="#{archivarBean.loadDocumento(docsEnviados)}" update=":dlgArchivar"><span class="glyphicon fa fa-fw fa-folder" aria-hidden="true"/></p:commandLink>
                                                    <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(docsEnviados)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                    <p:commandLink type="button" title="Prestamo" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-share-alt" aria-hidden="true"/></p:commandLink>
                                                    <p:commandLink type="button" title="Compartir con" action="#{compartirBean.loadDocumento(docsEnviados)}" ><span class="glyphicon fa fa-fw fa-users" aria-hidden="true"/></p:commandLink>                                               
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>
                                    <div id="menuTab3" class="tab-pane fade">
                                        <div class="col-xs-12">
                                            <p:dataTable widgetVar="En Prestamos" id="lstDocsPrestamo" var="docsPrestamo" value="#{documentosBean.prestamo}" style="margin-bottom:0" rows="10"
                                                         paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         rowsPerPageTemplate="5,10,15" emptyMessage="¡No se encontraron documentos en prestamo!">
                                                <f:facet name="header">
                                                    <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                    <p:columnToggler datasource="lstDocsPrestamo" trigger="toggler" />
                                                </f:facet>
                                                <p:column headerText="Radicado">
                                                    <h:outputText value="#{docsPrestamo.consecutivo}" />
                                                </p:column>
                                                <p:column headerText="Fecha de recepción">
                                                    <h:outputText value="#{docsPrestamo.fechaCreacion}" >
                                                        <f:convertDateTime type="date" pattern="dd-MM-yyyy"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Asunto">
                                                    <h:outputText value="#{docsPrestamo.asunto}" />
                                                </p:column>
                                                <p:column headerText="Remitente">
                                                    <h:outputText value="#{docsPrestamo.remitente}" />
                                                </p:column>
                                                <p:column headerText="Destinarario">
                                                    <h:outputText value="#{docsPrestamo.destinatario.nombres} #{docsPrestamo.destinatario.apelidos}" />
                                                </p:column>
                                                <p:column headerText="Detalle">
                                                    <h:outputText value="#{docsPrestamo.detalle}" />
                                                </p:column>
                                                <p:column headerText="Acciones">
                                                    <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(docsEntrantes)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                    <p:commandLink type="button" title="Devolver" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-share-alt" aria-hidden="true"/></p:commandLink>
                                                    <p:commandLink type="button" title="Compartir con" action="#{compartirBean.loadDocumento(docsEntrantes)}" ><span class="glyphicon fa fa-fw fa-users" aria-hidden="true"/></p:commandLink>                                               
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>
                                    <div id="menuTab4" class="tab-pane fade">
                                        <div class="col-xs-12">
                                            <p:dataTable widgetVar="PorVencer" id="lstDocsPorVencer" var="docsPorVencer" value="#{documentosBean.porVencer}" style="margin-bottom:0" rows="50"
                                                         paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         rowsPerPageTemplate="5,10,15,20,30,50" emptyMessage="¡No se encontraron documentos por vencer!">
                                                <f:facet name="header">
                                                    <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                    <p:columnToggler datasource="lstDocsPorVencer" trigger="toggler" />
                                                </f:facet>
                                                <p:column headerText="Estado" width="60">
                                                    <ui:fragment rendered="#{dateTimeBean.DaysBettwen(docsPorVencer.fechaVencimiento, now) gt 3 }">
                                                        <span class="status status-green"></span>
                                                    </ui:fragment>
                                                    <ui:fragment rendered="#{dateTimeBean.DaysBettwen(docsPorVencer.fechaVencimiento, now) eq 3}">
                                                        <span class="status status-yellow"></span>
                                                    </ui:fragment>
                                                    <ui:fragment rendered="#{dateTimeBean.DaysBettwen(docsPorVencer.fechaVencimiento, now) lt 2}">
                                                        <span class="status status-red"></span>
                                                    </ui:fragment>   
                                                </p:column>
                                                <p:column headerText="Dias de Vencimiento">
                                                    <h:outputText value="#{dateTimeBean.DaysBettwen(docsPorVencer.fechaVencimiento, now)}" />
                                                </p:column>
                                                <p:column headerText="Radicado">
                                                    <h:outputText value="#{docsPorVencer.consecutivo}" />
                                                </p:column>
                                                <p:column headerText="Fecha de recepción">
                                                    <h:outputText value="#{docsPorVencer.fechaCreacion}" >
                                                        <f:convertDateTime type="date" locale="es"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Fecha de vencimiento">
                                                    <h:outputText value="#{docsPorVencer.fechaVencimiento}" >
                                                        <f:convertDateTime type="date" pattern="dd-MM-yyyy"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Asunto">
                                                    <h:outputText value="#{docsPorVencer.asunto}" />
                                                </p:column>
                                                <p:column headerText="Remitente">
                                                    <h:outputText value="#{docsPorVencer.remitente}" />
                                                </p:column>
                                                <p:column headerText="Destinarario">
                                                    <h:outputText value="#{docsPorVencer.destinatario.nombres} #{docsPorVencer.destinatario.apelidos}" />
                                                </p:column>
                                                <p:column headerText="Detalle">
                                                    <h:outputText value="#{docsPorVencer.detalle}" />
                                                </p:column>
                                                <p:column headerText="Acciones">
                                                    <p:commandLink type="button" title="Responder" action="#{cartaBean.loadDocumento(docsPorVencer)}" disabled="#{not docsPorVencer.tipoDocumento.requiereRespuesta}" update=":dlgResponder"><span class="glyphicon fa fa-fw fa-reply" aria-hidden="true"/></p:commandLink>
                                                    <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(docsPorVencer)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                    <p:commandLink type="button" title="Prestamo" action="#{prestamoBean.loadDocumento(docsPorVencer)}" update=":dlgPrestamo"><span class="glyphicon fa fa-fw fa-share-alt" aria-hidden="true"/></p:commandLink>
                                                    <p:commandLink type="button" title="Compartir con" action="#{compartirBean.loadDocumento(docsPorVencer)}" ><span class="glyphicon fa fa-fw fa-users" aria-hidden="true"/></p:commandLink>                                               
                                                    <p:commandLink type="button" title="Redireccionar" action="#{redireccionarBean.loadDocumento(docsPorVencer)}" update=":dlgDevolver"  ><span class="glyphicon fa fa-fw fa-random" aria-hidden="true"/></p:commandLink>
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>
                                    <div id="menuTab5" class="tab-pane fade">
                                        <div class="col-xs-12">
                                            <ul class="nav nav-tabs">
                                                <li><a data-toggle="tab" href="#pmenuTab0">Actas</a></li>
                                                <li><a data-toggle="tab" href="#pmenuTab1">Cartas</a></li>
                                                <li><a data-toggle="tab" href="#pmenuTab2">Certificados</a></li>
                                                <li><a data-toggle="tab" href="#pmenuTab3">Circulares</a></li>
                                                <li><a data-toggle="tab" href="#pmenuTab4">Comunicaciones</a></li>
                                                <li><a data-toggle="tab" href="#pmenuTab5">Contantancias</a></li>
                                                <li><a data-toggle="tab" href="#pmenuTab6">Informes</a></li>
                                            </ul>
                                            <div class="tab-content">
                                                <div id="pmenuTab0" class="col-xs-12 tab-pane fade">
                                                    <p:dataTable widgetVar="actaPorFirmar" id="actas" var="acta" value="#{documentosBean.actasPorFirmar}" style="margin-bottom:0" rows="10"
                                                                 paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                                 rowsPerPageTemplate="5,10,15" emptyMessage="¡No se encontraron actas por firmar!" >
                                                        <f:facet name="header">
                                                            <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                            <p:columnToggler datasource="actas" trigger="toggler" />
                                                        </f:facet>
                                                        <p:column headerText="Redicado">
                                                            <h:outputText value="#{acta.consecutivo}" />
                                                        </p:column>
                                                        <p:column headerText="Fecha de creación">
                                                            <h:outputText value="#{acta.fechaCreacion}" >
                                                                <f:convertDateTime type="date" locale="es"/>
                                                            </h:outputText>
                                                        </p:column>
                                                        <p:column headerText="Asunto">
                                                            <h:outputText value="#{acta.convocatoria}" />
                                                        </p:column>
                                                        <p:column headerText="Remitente">
                                                            <h:outputText value="#{acta.desarrollo}" />
                                                        </p:column>
                                                        <p:column headerText="Presidente">
                                                            <h:outputText value="#{acta.presidente.nombres} #{acta.presidente.apelidos}" />
                                                        </p:column>
                                                        <p:column headerText="Acciones">
                                                            <a href="#" type="button" title="Comentar" onclick="PF('denResponder').show()"><span class="glyphicon fa fa-fw fa-comments" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Editar" onclick="PF('denResponder').show()"><span class="glyphicon fa fa-fw fa-pencil" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Firmar" onclick="PF('denResponder').show()"><span class="glyphicon fa fa-fw fa-pencil-square-o" aria-hidden="true"></span></a>
                                                            <p:commandLink type="button" title="Ver" action="#{actaViewBean.showDocument(acta)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                            <a href="#" type="button" title="Compartir con" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-users" aria-hidden="true"></span></a>
                                                        </p:column>
                                                    </p:dataTable>
                                                </div>
                                                <div id="pmenuTab1" class="col-xs-12 tab-pane fade">
                                                    <p:dataTable widgetVar="PorVencer" id="cartas" var="carta" value="#{documentosBean.cartaPorFirmar}" style="margin-bottom:0" rows="10"
                                                                 paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                                 rowsPerPageTemplate="5,10,15" emptyMessage="¡No se encontraron cartas por firmar!">
                                                        <f:facet name="header">
                                                            <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                            <p:columnToggler datasource="cartas" trigger="toggler" />
                                                        </f:facet>
                                                        <p:column headerText="Redicado">
                                                            <h:outputText value="#{carta.consecutivo}" />
                                                        </p:column>
                                                        <p:column headerText="Fecha de recepción">
                                                            <h:outputText value="#{carta.fechaCreacion}" >
                                                                <f:convertDateTime type="date" locale="es"/>
                                                            </h:outputText>
                                                        </p:column>
                                                        <p:column headerText="Destinatario">
                                                            <h:outputText value="#{carta.destinatario}" />
                                                        </p:column>
                                                        <p:column headerText="Remitente">
                                                            <h:outputText value="#{carta.remitente.nombres} #{carta.remitente.apelidos}" />
                                                        </p:column>
                                                        <p:column headerText="Asunto">
                                                            <h:outputText value="#{carta.asunto}" />
                                                        </p:column>
                                                        <p:column headerText="Acciones">
                                                            <a href="#" type="button" title="Comentar" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-comments" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Editar" onclick="PF('denArchivar').show()"><span class="glyphicon fa fa-fw fa-folder" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Firmar" onclick="PF('denResponder').show()"><span class="glyphicon fa fa-fw fa-pencil-square-o" aria-hidden="true"></span></a>
                                                            <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(doc)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                            <a href="#" type="button" title="Compartir con" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-users" aria-hidden="true"></span></a>
                                                        </p:column>
                                                    </p:dataTable>
                                                </div>
                                                <div id="pmenuTab2" class="col-xs-12 tab-pane fade">
                                                    <p:dataTable widgetVar="Por Vencer" id="certificados" var="cert" value="#{documentosBean.certificadoPorFirmar}" style="margin-bottom:0" rows="10"
                                                                 paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                                 rowsPerPageTemplate="5,10,15" emptyMessage="¡No se encontraron certificados por firmar!">
                                                        <f:facet name="header">
                                                            <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                            <p:columnToggler datasource="certificados" trigger="toggler" />
                                                        </f:facet>
                                                        <p:column headerText="Redicado">
                                                            <h:outputText value="#{cert.consecutivo}" />
                                                        </p:column>
                                                        <p:column headerText="Fecha de creación">
                                                            <h:outputText value="#{cert.fechaCreacion}" >
                                                                <f:convertDateTime type="date" locale="es"/>
                                                            </h:outputText>
                                                        </p:column>
                                                        <p:column headerText="Remitente">
                                                            <h:outputText value="#{cert.remitente.nombres} #{cert.remitente.apelidos}" />
                                                        </p:column>
                                                        <p:column headerText="Acciones">
                                                            <a href="#" type="button" title="Comentar" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-comments" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Editar" onclick="PF('denArchivar').show()"><span class="glyphicon fa fa-fw fa-folder" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Firmar" onclick="PF('denResponder').show()"><span class="glyphicon fa fa-fw fa-pencil-square-o" aria-hidden="true"></span></a>
                                                            <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(doc)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                            <a href="#" type="button" title="Compartir con" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-users" aria-hidden="true"></span></a>
                                                        </p:column>
                                                    </p:dataTable>
                                                </div>
                                                <div id="pmenuTab3" class="col-xs-12 tab-pane fade">
                                                    <p:dataTable widgetVar="Por Vencer" id="circulares" var="cir" value="#{documentosBean.circularPorFirmar}" style="margin-bottom:0" rows="10"
                                                                 paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                                 rowsPerPageTemplate="5,10,15" emptyMessage="¡No se encontraron circulares por firmar!">
                                                        <f:facet name="header">
                                                            <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                            <p:columnToggler datasource="circulares" trigger="toggler" />
                                                        </f:facet>
                                                        <p:column headerText="Radicado">
                                                            <h:outputText value="#{cir.consecutivo}" />
                                                        </p:column>
                                                        <p:column headerText="Fecha de creación">
                                                            <h:outputText value="#{cir.fechaCreacion}" >
                                                                <f:convertDateTime type="date" locale="es"/>
                                                            </h:outputText>
                                                        </p:column>
                                                        <p:column headerText="Grupo Detinatario">
                                                            <h:outputText value="#{cir.grupoDestinatario}" />
                                                        </p:column>
                                                        <p:column headerText="Remitente">
                                                            <h:outputText value="#{cir.remitente.nombres} #{cir.remitente.apelidos}" />
                                                        </p:column>
                                                        <p:column headerText="Acciones">
                                                            <a href="#" type="button" title="Comentar" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-comments" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Editar" onclick="PF('denArchivar').show()"><span class="glyphicon fa fa-fw fa-pencil" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Firmar" onclick="PF('denResponder').show()"><span class="glyphicon fa fa-fw fa-pencil-square-o" aria-hidden="true"></span></a>
                                                            <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(doc)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                            <a href="#" type="button" title="Compartir con" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-users" aria-hidden="true"></span></a>
                                                        </p:column>
                                                    </p:dataTable>
                                                </div>
                                                <div id="pmenuTab4" class="col-xs-12 tab-pane fade">
                                                    <p:dataTable widgetVar="PorVencer" id="comunicaciones" var="com" value="#{documentosBean.comunicadoPorFirmar}" style="margin-bottom:0" rows="10"
                                                                 paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                                 rowsPerPageTemplate="5,10,15" emptyMessage="¡No se encontraron circulares por firmar!">
                                                        <f:facet name="header">
                                                            <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                            <p:columnToggler datasource="comunicaciones" trigger="toggler" />
                                                        </f:facet>
                                                        <p:column headerText="Redicado">
                                                            <h:outputText value="#{null}" />
                                                        </p:column>
                                                        <p:column headerText="Fecha de creación">
                                                            <h:outputText value="#{com.fechaCreacion}" >
                                                                <f:convertDateTime type="date" locale="es"/>
                                                            </h:outputText>
                                                        </p:column>
                                                        <p:column headerText="Asunto">
                                                            <h:outputText value="#{com.asunto}" />
                                                        </p:column>
                                                        <p:column headerText="Remitente">
                                                            <h:outputText value="#{com.destinatario.nombres} #{com.destinatario.nombres}" />
                                                        </p:column>
                                                        <p:column headerText="Destinarario">
                                                            <h:outputText value="#{com.destinatario.nombres} #{com.destinatario.apelidos}" />
                                                        </p:column>
                                                        <p:column headerText="Acciones">
                                                            <a href="#" type="button" title="Comentar" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-comments" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Editar" onclick="PF('denArchivar').show()"><span class="glyphicon fa fa-fw fa-folder" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Firmar" onclick="PF('denResponder').show()"><span class="glyphicon fa fa-fw fa-pencil-square-o" aria-hidden="true"></span></a>
                                                            <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(doc)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                            <a href="#" type="button" title="Compartir con" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-users" aria-hidden="true"></span></a>
                                                        </p:column>
                                                    </p:dataTable>
                                                </div>
                                                <div id="pmenuTab5" class="col-xs-12 tab-pane fade">
                                                    <p:dataTable widgetVar="PorVencer" id="constancias" var="cons" value="#{documentosBean.constanciaPorFirmar}" style="margin-bottom:0" rows="10"
                                                                 paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                                 rowsPerPageTemplate="5,10,15" emptyMessage="¡No se encontraron constancias por firmar!">
                                                        <f:facet name="header">
                                                            <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                            <p:columnToggler datasource="constancias" trigger="toggler" />
                                                        </f:facet>
                                                        <p:column headerText="Redicado">
                                                            <h:outputText value="#{cons.consecutivo}" />
                                                        </p:column>
                                                        <p:column headerText="Fecha de creación">
                                                            <h:outputText value="#{cons.fechaCreacion}" >
                                                                <f:convertDateTime type="date" locale="es"/>
                                                            </h:outputText>
                                                        </p:column>
                                                        <p:column headerText="Remitente">
                                                            <h:outputText value="#{cons.remitente.nombres} #{cons.remitente.apelidos}" />
                                                        </p:column>
                                                        <p:column headerText="Acciones">
                                                            <a href="#" type="button" title="Comentar" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-comments" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Editar" onclick="PF('denArchivar').show()"><span class="glyphicon fa fa-fw fa-folder" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Firmar" onclick="PF('denResponder').show()"><span class="glyphicon fa fa-fw fa-pencil-square-o" aria-hidden="true"></span></a>
                                                            <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(doc)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                            <a href="#" type="button" title="Compartir con" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-users" aria-hidden="true"></span></a>
                                                        </p:column>
                                                    </p:dataTable>
                                                </div>
                                                <div id="pmenuTab6" class="col-xs-12 tab-pane fade">
                                                    <p:dataTable widgetVar="PorVencer" id="informes" var="inf" value="#{documentosBean.informePorFirmar}" style="margin-bottom:0" rows="10"
                                                                 paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                                 rowsPerPageTemplate="5,10,15" emptyMessage="¡No se encontraron informes por firmar!">
                                                        <f:facet name="header">
                                                            <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                            <p:columnToggler datasource="informes" trigger="toggler" />
                                                        </f:facet>
                                                        <p:column headerText="Redicado">
                                                            <h:outputText value="#{inf.consecutivo}" />
                                                        </p:column>
                                                        <p:column headerText="Fecha de creación">
                                                            <h:outputText value="#{inf.fechaCreacion}" >
                                                                <f:convertDateTime type="date" locale="es"/>
                                                            </h:outputText>
                                                        </p:column>
                                                        <p:column headerText="Objetivo">
                                                            <h:outputText value="#{inf.objetivo}" />
                                                        </p:column>
                                                        <p:column headerText="Remitente">
                                                            <h:outputText value="#{inf.remitente.nombres} #{inf.remitente.apelidos}" />
                                                        </p:column>

                                                        <p:column headerText="Acciones">
                                                            <a href="#" type="button" title="Comentar" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-comments" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Editar" onclick="PF('denArchivar').show()"><span class="glyphicon fa fa-fw fa-folder" aria-hidden="true"></span></a>
                                                            <a href="#" type="button" title="Firmar" onclick="PF('denResponder').show()"><span class="glyphicon fa fa-fw fa-pencil-square-o" aria-hidden="true"></span></a>
                                                            <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(doc)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                            <a href="#" type="button" title="Compartir con" onclick="PF('denPrestamo').show()"><span class="glyphicon fa fa-fw fa-users" aria-hidden="true"></span></a>
                                                        </p:column>
                                                    </p:dataTable>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div id="menuTab6" class="tab-pane fade">
                                        <div class="col-xs-12">
                                            <p:dataTable widgetVar="PorArchivar" id="lstDocsPorArchivados" var="docsPorArchivar" value="#{documentosBean.sinArchivar}" style="margin-bottom:0" rows="50"
                                                         paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         rowsPerPageTemplate="5,10,15,20,30,50" emptyMessage="¡No se encontraron documentos sin archivar!">
                                                <f:facet name="header">
                                                    <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                    <p:columnToggler datasource="lstDocsPorArchivados" trigger="toggler" />
                                                </f:facet>
                                                <p:column headerText="Redicado">
                                                    <h:outputText value="#{docsPorArchivar.consecutivo}" />
                                                </p:column>
                                                <p:column headerText="Fecha de recepción">
                                                    <h:outputText value="#{docsPorArchivar.fechaCreacion}" >
                                                        <f:convertDateTime type="date" locale="es"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Asunto">
                                                    <h:outputText value="#{docsPorArchivar.asunto}" />
                                                </p:column>
                                                <p:column headerText="Remitente">
                                                    <h:outputText value="#{docsPorArchivar.remitente}" />
                                                </p:column>
                                                <p:column headerText="Destinarario">
                                                    <h:outputText value="#{docsPorArchivar.destinatario.nombres} #{docsPorArchivar.destinatario.apelidos}" />
                                                </p:column>
                                                <p:column headerText="Detalle">
                                                    <h:outputText value="#{docsPorArchivar.detalle}" />
                                                </p:column>
                                                <p:column headerText="Acciones">
                                                    <p:commandLink type="button" title="Archivar" action="#{archivarBean.loadDocumento(docsPorArchivar)}" update=":dlgArchivar" disabled="#{docsPorArchivar.estado eq 9 }" ><span class="glyphicon fa fa-fw fa-folder" aria-hidden="true"/></p:commandLink>
                                                    <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(docsPorArchivar)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                    <p:commandLink type="button" title="Prestamo" action="#{prestamoBean.loadDocumento(docsPorArchivar)}" update=":dlgPrestamo"><span class="glyphicon fa fa-fw fa-share-alt" aria-hidden="true"/></p:commandLink>
                                                    <p:commandLink type="button" title="Compartir con" action="#{compartirBean.loadDocumento(docsPorArchivar)}" ><span class="glyphicon fa fa-fw fa-users" aria-hidden="true"/></p:commandLink>                                               
                                                </p:column>
                                            </p:dataTable>
                                        </div>
                                    </div>
                                    <div id="menuTab7" class="tab-pane fade">
                                        <p:dataTable widgetVar="Compartido" id="lstDocsCompartidos" var="docsCompartidos" value="#{documentosBean.documentos}" style="margin-bottom:0" rows="10"
                                                     paginator="true"  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     rowsPerPageTemplate="5,10,15" emptyMessage="¡No se encontraron documentos compartidos!">
                                            <f:facet name="header">
                                                <p:commandButton id="toggler" type="button" value="Columnas" style="float:right" icon="ui-icon-calculator" />
                                                <p:columnToggler datasource="lstDocsCompartidos" trigger="toggler" />
                                            </f:facet>
                                            <p:column headerText="Redicado">
                                                <h:outputText value="#{docsCompartidos.consecutivo}" />
                                            </p:column>
                                            <p:column headerText="Fecha de recepción">
                                                <h:outputText value="#{docsCompartidos.fechaCreacion}" >
                                                    <f:convertDateTime type="date" pattern="dd-MM-yyyy" locale="es"/>
                                                </h:outputText>
                                            </p:column>
                                            <p:column headerText="Asunto">
                                                <h:outputText value="#{docsCompartidos.asunto}" />
                                            </p:column>
                                            <p:column headerText="Remitente">
                                                <h:outputText value="#{docsCompartidos.remitente}" />
                                            </p:column>
                                            <p:column headerText="Destinarario">
                                                <h:outputText value="#{docsCompartidos.destinatario.nombres} #{docsArchivados.destinatario.apelidos}" />
                                            </p:column>
                                            <p:column headerText="Detalle">
                                                <h:outputText value="#{docsCompartidos.detalle}" />
                                            </p:column>
                                            <p:column headerText="Acciones">
                                                <p:commandLink type="button" title="Ver" action="#{documentViewerBean.showDocument(doc)}" update=":dlgVisor"><span class="glyphicon fa fa-fw fa-eye" aria-hidden="true"></span></p:commandLink>
                                                <p:commandLink type="button" title="Comentar" onclick="PF('denComentar').show()"><span class="glyphicon fa fa-fw fa-comments" aria-hidden="true"/></p:commandLink>
                                            </p:column>
                                        </p:dataTable>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <p:dialog id="dlgArchivar" header="Archivar" widgetVar="denArchivar" modal="true" showEffect="fade" hideEffect="fade" resizable="false" dynamic="true" width="80%" maximizable="true">
                        <h:form>
                            <ui:include src="archivar.xhtml">
                            </ui:include>
                        </h:form>
                    </p:dialog>
                    <p:dialog id="dlgPrestamo" header="Préstamo de documentos" widgetVar="denPrestamo" modal="true" showEffect="fade" hideEffect="fade" resizable="false" dynamic="true" width="60%" height="400">
                        <h:form>
                            <ui:include src="prestamo.xhtml">
                            </ui:include>
                        </h:form>
                    </p:dialog>
                    <p:dialog id="dlgResponder" header="Responder" widgetVar="denResponder" modal="true" showEffect="fade" hideEffect="fade" resizable="false" dynamic="true" height="400" maximizable="true">
                        <h:form>
                            <ui:include src="../produccion/carta.xhtml">
                            </ui:include>
                        </h:form>
                    </p:dialog>
                    <p:dialog id="dlgDevolver" header="Redireccionar" widgetVar="denRedireccionar" modal="true" showEffect="fade" hideEffect="fade" resizable="false" dynamic="true" width="60%" height="400">
                        <h:form>
                            <ui:include src="redireccionar.xhtml">
                            </ui:include>
                        </h:form>   
                    </p:dialog>
                    <p:dialog id="dlgCompartir" header="Compartir documento" widgetVar="denCompartir" modal="true" showEffect="fade" hideEffect="fade" resizable="false" dynamic="true" width="60%" height="400">
                        <h:form>
                            <ui:include src="compartir.xhtml">
                            </ui:include>
                        </h:form>
                    </p:dialog>
                    <p:dialog id="dlgVisor" header="Visor de Documentos" widgetVar="denVisor" modal="true" showEffect="fade" hideEffect="fade" resizable="false" dynamic="true" width="80%" maximizable="true" >
                        <h:form>
                            <c:if test='#{documentViewerBean.content.contentType.equals("application/pdf")}'>
                                <pe:documentViewer id="documentCtl" height="800" value="#{documentViewerBean.content}" />  
                            </c:if>
                            <c:if test='#{documentViewerBean.content.contentType.equals("application/octet-stream")}'>
                                <pe:documentViewer id="documentCtl" height="800" value="#{documentViewerBean.content}" />  
                            </c:if>
                            <c:if test='#{documentViewerBean.content.contentType.equals("image/jpeg")}'>
                                <p:graphicImage height="800"  value="#{documentViewerBean.content}"/>  
                            </c:if>
                            <div>
                                <p:commandButton icon="fa fa-fw fa-times" value="Cerrar" immediate="true" oncomplete="PF('denVisor').hide()"></p:commandButton>
                            </div>
                        </h:form>
                    </p:dialog>
                    <p:dialog id="dlgVisorActa" header="Visor de Actas" widgetVar="denVisorActa" modal="true" showEffect="fade" hideEffect="fade" resizable="false" dynamic="true" width="80%" maximizable="true" >
                        <h:form>
                            <pe:documentViewer id="documentCtlAct" height="800" value="#{actaViewBean.content}" />  
                            <div>
                                <p:commandButton icon="fa fa-fw fa-times" value="Cerrar" immediate="true" oncomplete="PF('dlgVisorActa').hide()"></p:commandButton>
                            </div>
                        </h:form>
                    </p:dialog>
                    <p:dialog id="dlgVisorCarta" header="Visor de Cartas" widgetVar="denVisorCarta" modal="true" showEffect="fade" hideEffect="fade" resizable="false" dynamic="true" width="80%" maximizable="true" >
                        <h:form>
                            <pe:documentViewer id="documentCtlCarta" height="800" value="#{cartaViewBean.content}" />  
                            <div>
                                <p:commandButton icon="fa fa-fw fa-times" value="Cerrar" immediate="true" oncomplete="PF('denVisorCarta').hide()"></p:commandButton>
                            </div>
                        </h:form>
                    </p:dialog>
                </c:if>
                <c:if test="#{autorizationBean.hasAccess('paneldocumentos') == false}">
                    <h3>¡Lo sentimos, no tiene acceso a este módulo!</h3>
                </c:if>
            </ui:define>
        </ui:composition>
    </body>

</html>
